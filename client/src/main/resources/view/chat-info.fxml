<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Accordion?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TitledPane?>
<?import javafx.scene.control.Tooltip?> <?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.text.Font?>

<VBox prefWidth="300.0" styleClass="info-sidebar" stylesheets="@../styles.css"
      xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.example.client.controller.ChatInfoController">

    <VBox alignment="CENTER" spacing="10.0">
        <padding><Insets bottom="20" top="30" /></padding>

        <StackPane>
            <Circle fill="#e0e0e0" radius="40.0" />
            <ImageView fx:id="avatarView" fitHeight="80.0" fitWidth="80.0" pickOnBounds="true" preserveRatio="false">
                <clip><Circle centerX="40" centerY="40" radius="40" /></clip>
            </ImageView>

            <Button onAction="#handleChangeGroupAvatar" styleClass="btn-camera-overlay" text="ðŸ“·"
                    StackPane.alignment="BOTTOM_RIGHT" visible="false" fx:id="changeAvatarBtn">
                <tooltip><Tooltip text="Äá»•i áº£nh nhÃ³m" /></tooltip>
            </Button>
        </StackPane>

        <Label fx:id="nameLabel" text="TÃªn NgÆ°á»i DÃ¹ng" textFill="#333333">
            <font><Font name="Segoe UI Bold" size="20.0" /></font>
        </Label>

        <Label text="Äang hoáº¡t Ä‘á»™ng" textFill="#65676b" />
    </VBox>

    <HBox alignment="CENTER" spacing="20.0">
        <padding><Insets bottom="20" /></padding>
        <VBox alignment="CENTER" spacing="5">
            <Button styleClass="btn-circle-action" text="ðŸ‘¤" />
            <Label style="-fx-font-size: 11px;" text="Trang cÃ¡ nhÃ¢n" textFill="#65676b" />
        </VBox>
        <VBox alignment="CENTER" spacing="5">
            <Button styleClass="btn-circle-action" text="ðŸ””" />
            <Label style="-fx-font-size: 11px;" text="Táº¯t thÃ´ng bÃ¡o" textFill="#65676b" />
        </VBox>
        <VBox alignment="CENTER" spacing="5">
            <Button styleClass="btn-circle-action" text="ðŸ”" />
            <Label style="-fx-font-size: 11px;" text="TÃ¬m kiáº¿m" textFill="#65676b" />
        </VBox>
    </HBox>

    <Separator opacity="0.1" />
    <ScrollPane fitToWidth="true" styleClass="scroll-pane" VBox.vgrow="ALWAYS">
        <VBox spacing="0">
            <Button alignment="CENTER_LEFT" maxWidth="Infinity" styleClass="menu-item-btn" text="ThÃ´ng tin vá» Ä‘oáº¡n chat  â€º" />
            <Button alignment="CENTER_LEFT" maxWidth="Infinity" styleClass="menu-item-btn" text="TÃ¹y chá»‰nh Ä‘oáº¡n chat     â€º" />

            <Accordion style="-fx-background-color: transparent;">
                <panes>
                    <TitledPane animated="true" text="ThÃ nh viÃªn nhÃ³m">
                        <content>
                            <VBox spacing="10" style="-fx-background-color: transparent; -fx-padding: 0;">
                                <Button fx:id="addMemberBtn" text="+ ThÃªm thÃ nh viÃªn"
                                        maxWidth="Infinity" styleClass="btn-outline-blue"
                                        onAction="#handleAddMember"/>

                                <ListView fx:id="memberListView" prefHeight="200" styleClass="list-view"/>
                            </VBox>
                        </content>
                    </TitledPane>
                    <TitledPane animated="true" text="File phÆ°Æ¡ng tiá»‡n &amp; file">
                        <content>
                            <VBox spacing="10" style="-fx-background-color: transparent;">
                                <Button styleClass="sub-menu-btn" text="ðŸ–¼  File phÆ°Æ¡ng tiá»‡n" />
                                <Button styleClass="sub-menu-btn" text="ðŸ“„  File tÃ i liá»‡u" />
                            </VBox>
                        </content>
                    </TitledPane>
                </panes>
            </Accordion>

            <Button alignment="CENTER_LEFT" maxWidth="Infinity" styleClass="menu-item-btn" text="Quyá»n riÃªng tÆ° &amp; há»— trá»£ â€º" />

            <VBox fx:id="adminControls" spacing="5" alignment="CENTER" visible="false" managed="false">
                <Button fx:id="editGroupBtn" text="âœ Äá»•i tÃªn nhÃ³m" onAction="#handleEditGroupName" styleClass="menu-item-btn"/>
                <Button fx:id="dissolveGroupBtn" text="ðŸ—‘ Giáº£i tÃ¡n nhÃ³m" onAction="#handleDissolveGroup"
                        style="-fx-text-fill: red; -fx-background-color: transparent; -fx-font-weight: bold;"/>
            </VBox>

            <VBox alignment="CENTER" style="-fx-padding: 20 0 20 0;">
                <Button fx:id="leaveGroupBtn" text="Rá»i khá»i nhÃ³m"
                        onAction="#handleLeaveGroup"
                        visible="false" managed="false"
                        style="-fx-background-color: #ffebee; -fx-text-fill: #c62828; -fx-font-weight: bold; -fx-cursor: hand; -fx-background-radius: 20; -fx-padding: 8 20;" />
            </VBox>

        </VBox>
    </ScrollPane>
</VBox>